name: Doc-Pilot
on: [push, pull_request, workflow_dispatch, workflow_call]

permissions: 
    contents: write

jobs:
    add-docstring:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout 🛎️ ${{ github.event.repository.name }}
          uses: actions/checkout@v4
          with:
            path: DoCPilot
            persist-credentials: false
            submodules: "recursive"
            set-safe-directory: false

        - name: Get changed files
          id: changed-files
          run: |
            if ${{ github.event_name == 'pull_request' }}; then
                echo "changed_files=$(git diff --name-only -r HEAD^1 HEAD | xargs)" >> $GITHUB_OUTPUT
            else
                echo "changed_files=$(git diff --name-only ${{ github.event.before }} ${{ github.event.after }} | xargs)" >> $GITHUB_OUTPUT
            fi
        
        - name: Run Claude Script
          run: |
            echo "claude magic"
        
        - name: Cleanup Process
          run: |
            echo "We have now run cleanup"

