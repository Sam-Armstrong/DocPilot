name: Doc-Pilot
on: push

permissions: 
    actions: read
    contents: write

jobs:
    add-docstring:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
            with:
              path: DocPilot
              persist-credentials: false
              submodules: "recursive"
              fetch-depth: 10

              
        
          - name: Install GitPython
            run: |
                python -m pip install --upgrade pip
                pip install pygithub
            shell: bash
        
          - name: Fetch Commit Changes
            id: fetch_changes
            run: |
              from github import Github

              g = Github(${{secrets.GITHUB_TOKEN}})
              
              # Get the authenticated user (you can change this to any user if needed)
              user = g.get_user()
              
              # Get the user's current repository (you can change this to any other repository if needed)
              repo = user.get_repo(${{github.repository}})
              
              # Get the default branch of the repository
              branch = repo.get_branch(repo.default_branch)
              
              # Get the latest commit on the default branch
              latest_commit = branch.commit
              print(latest_commit)
            shell: python
        
          - name: Display Commit Changes
            run: |
                commit_changes="${{ steps.fetch_changes.outputs }}"
                echo "$commit_changes"
            shell: bash