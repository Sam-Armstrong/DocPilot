name: Doc-Pilot
on: [push, pull_request, workflow_dispatch, workflow_call]

permissions: 
    contents: write

jobs:
    add-docstring:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
            with:
              path: DocPilot
              persist-credentials: false
              submodules: "recursive"
              fetch-depth: 2

          - name: List changed files
            id: changes
            
            run: |
              $changed_files = git diff --name-only HEAD~1 HEAD
              echo "::set-output name=files::$changed_files"
    

          - name: Display changed files
            run: |
              echo "Changed files:"
              echo "${{ steps.changes.outputs.files }}"
            shell: bash

          - name: Get new file contents
            id: file_contents
            run: |
              changed_files="${{ steps.changes.outputs.files }}"
              for file in $changed_files; do
                echo "Contents of $file:"
                cat $file
              done
            shell: bash



